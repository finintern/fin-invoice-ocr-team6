{
	"info": {
		"_postman_id": "607e16e5-4700-4c56-96e8-6f94f88d08c7",
		"name": "Functional Test",
		"description": "API Purchase Order & Invoice Reader fineksi dibuat untuk memberikan kemudahan bagi partner dalam menganalisis dan mengelola dokumen PO dan invoice yang mereka miliki.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "29699485"
	},
	"item": [
		{
			"name": "Invoice Upload",
			"item": [
				{
					"name": "Upload Invoice Succesful",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"// Test for response time\r",
									"pm.test(\"Response time is less than 10000ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(10000);\r",
									"});\r",
									"\r",
									"// Test for content type\r",
									"pm.test(\"Content-Type is present and is application/json\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									"\r",
									"// Test for message and invoice details\r",
									"pm.test(\"Response contains message and invoice details\", function () {\r",
									"    pm.expect(pm.response.json().message.message).to.equal(\"Invoice upload initiated\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test-valid.pdf"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"upload"
							]
						},
						"description": "Upload invoice berupa file PDF."
					},
					"response": []
				},
				{
					"name": "Invalid File",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 415\", function () {\r",
									"    pm.response.to.have.status(415);\r",
									"});\r",
									"\r",
									"// Test for response time\r",
									"pm.test(\"Response time is less than 500ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
									"});\r",
									"\r",
									"// Test for content type\r",
									"pm.test(\"Content type is application/json\", function () {\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									"\r",
									"// Test for message in the response body\r",
									"pm.test(\"Message is 'Invalid MIME type'\", function () {\r",
									"    pm.expect(pm.response.json().message).to.equal(\"Invalid MIME type\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test-nonpdf.txt"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"upload"
							]
						},
						"description": "Upload invoice berupa file PDF."
					},
					"response": []
				},
				{
					"name": "Missing File",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"// Test for response time\r",
									"pm.test(\"Response time is less than 500ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
									"});\r",
									"\r",
									"// Test for the presence of message in the response body\r",
									"pm.test(\"Response contains message\", function () {\r",
									"    pm.expect(pm.response.json().message).to.exist;\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"upload"
							]
						}
					},
					"response": []
				},
				{
					"name": "Encrypted (No Password)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 403\", function () {\r",
									"    pm.response.to.have.status(403);\r",
									"});\r",
									"\r",
									"// Test for response message\r",
									"pm.test(\"Response message is 'PDF is encrypted and requires a password'\", function () {\r",
									"    pm.expect(pm.response.json().message.message).to.equal(\"PDF is encrypted and requires a password\");\r",
									"});\r",
									"\r",
									"// Test for content type header\r",
									"pm.test(\"Content-Type is present and is application/json\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test_encrypted.pdf"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"upload"
							]
						},
						"description": "Upload invoice berupa file PDF."
					},
					"response": []
				},
				{
					"name": "Encrypted (Incorrect Password)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"// Test for response message\r",
									"pm.test(\"Response message is 'Incorrect password for encrypted PDF'\", function () {\r",
									"    pm.expect(pm.response.json().message).to.equal(\"Incorrect password for encrypted PDF\");\r",
									"});\r",
									"\r",
									"// Test for content type header\r",
									"pm.test(\"Content-Type is present and is application/json\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test_encrypted.pdf"
								},
								{
									"key": "password",
									"value": "wrong_password",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"upload"
							]
						},
						"description": "Upload invoice berupa file PDF."
					},
					"response": []
				},
				{
					"name": "Encrypted (Success)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"// Test for response message\r",
									"pm.test(\"Response message is 'Invoice upload initiated'\", function () {\r",
									"    pm.expect(pm.response.json().message.message).to.equal(\"Invoice upload initiated\");\r",
									"});\r",
									"\r",
									"// Test for content type header\r",
									"pm.test(\"Content-Type is present and is application/json\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test_encrypted.pdf"
								},
								{
									"key": "password",
									"value": "password",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"upload"
							]
						},
						"description": "Upload invoice berupa file PDF."
					},
					"response": []
				},
				{
					"name": "Unauthorized Client",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body has a message field\", function () {\r",
									"    pm.expect(pm.response.json()).to.have.property('message');\r",
									"});\r",
									"\r",
									"pm.test(\"Response body message is 'Unauthorized: Invalid credentials'\", function () {\r",
									"    pm.expect(pm.response.json().message).to.equal(\"Unauthorized: Invalid credentials\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "secret",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test-valid.pdf"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"upload"
							]
						}
					},
					"response": []
				},
				{
					"name": "Reject > 20 MB",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response code is 413\", function () {\r",
									"    pm.response.to.have.status(413);\r",
									"});\r",
									"\r",
									"// pm.test(\"Response time is less than 5000ms\", function () {\r",
									"//     pm.expect(pm.response.responseTime).to.be.below(5000);\r",
									"// });\r",
									"\r",
									"pm.test(\"Response body has message field\", function () {\r",
									"    pm.response.to.have.jsonBody('message');\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							},
							{
								"key": "client_id",
								"value": "surya",
								"type": "text",
								"disabled": true
							},
							{
								"key": "client_secret",
								"value": "suryasecret",
								"type": "text",
								"disabled": true
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test-30mb.pdf"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"upload"
							]
						}
					},
					"response": []
				}
			],
			"description": "_Endpoint_ `/api/invoice` berfungsi untuk melakukan fungsionalitas yang berkaitan dengan _invoice_."
		},
		{
			"name": "Purchase Order Upload",
			"item": [
				{
					"name": "Upload PO Succesful",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"// Test for response time\r",
									"pm.test(\"Response time is less than 10000ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(10000);\r",
									"});\r",
									"\r",
									"// Test for content type\r",
									"pm.test(\"Content-Type is present and is application/json\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									"\r",
									"// Test for message and invoice details\r",
									"pm.test(\"Response contains message and invoice details\", function () {\r",
									"    pm.expect(pm.response.json().message.message).to.equal(\"Purchase Order upload initiated\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test-valid.pdf"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"upload"
							]
						},
						"description": "Upload invoice berupa file PDF."
					},
					"response": []
				},
				{
					"name": "Invalid File",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 415\", function () {\r",
									"    pm.response.to.have.status(415);\r",
									"});\r",
									"\r",
									"// Test for response time\r",
									"pm.test(\"Response time is less than 500ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
									"});\r",
									"\r",
									"// Test for content type\r",
									"pm.test(\"Content type is application/json\", function () {\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									"\r",
									"// Test for message in the response body\r",
									"pm.test(\"Message is 'Invalid MIME type'\", function () {\r",
									"    pm.expect(pm.response.json().message).to.equal(\"Invalid MIME type\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test-nonpdf.txt"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"upload"
							]
						},
						"description": "Upload invoice berupa file PDF."
					},
					"response": []
				},
				{
					"name": "Missing File",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"// Test for response time\r",
									"pm.test(\"Response time is less than 500ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
									"});\r",
									"\r",
									"// Test for the presence of message in the response body\r",
									"pm.test(\"Response contains message\", function () {\r",
									"    pm.expect(pm.response.json().message).to.exist;\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"upload"
							]
						}
					},
					"response": []
				},
				{
					"name": "Encrypted (No Password)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 403\", function () {\r",
									"    pm.response.to.have.status(403);\r",
									"});\r",
									"\r",
									"// Test for response message\r",
									"pm.test(\"Response message is 'PDF is encrypted and requires a password'\", function () {\r",
									"    pm.expect(pm.response.json().message.message).to.equal(\"PDF is encrypted and requires a password\");\r",
									"});\r",
									"\r",
									"// Test for content type header\r",
									"pm.test(\"Content-Type is present and is application/json\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test_encrypted.pdf"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"upload"
							]
						},
						"description": "Upload invoice berupa file PDF."
					},
					"response": []
				},
				{
					"name": "Encrypted (Incorrect Password)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"\r",
									"// Test for response message\r",
									"pm.test(\"Response message is 'Incorrect password for encrypted PDF'\", function () {\r",
									"    pm.expect(pm.response.json().message).to.equal(\"Incorrect password for encrypted PDF\");\r",
									"});\r",
									"\r",
									"// Test for content type header\r",
									"pm.test(\"Content-Type is present and is application/json\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test_encrypted.pdf"
								},
								{
									"key": "password",
									"value": "wrong_password",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"upload"
							]
						},
						"description": "Upload invoice berupa file PDF."
					},
					"response": []
				},
				{
					"name": "Encrypted (Success)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"// Test for response message\r",
									"pm.test(\"Response message is 'Invoice upload initiated'\", function () {\r",
									"    pm.expect(pm.response.json().message.message).to.equal(\"Invoice upload initiated\");\r",
									"});\r",
									"\r",
									"// Test for content type header\r",
									"pm.test(\"Content-Type is present and is application/json\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test_encrypted.pdf"
								},
								{
									"key": "password",
									"value": "password",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"upload"
							]
						},
						"description": "Upload invoice berupa file PDF."
					},
					"response": []
				},
				{
					"name": "Unauthorized Client",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body has a message field\", function () {\r",
									"    pm.expect(pm.response.json()).to.have.property('message');\r",
									"});\r",
									"\r",
									"pm.test(\"Response body message is 'Unauthorized: Invalid credentials'\", function () {\r",
									"    pm.expect(pm.response.json().message).to.equal(\"Unauthorized: Invalid credentials\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "secret",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "postman-cloud:///1effe480-e564-4550-9930-7fdf7ce8d914"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"upload"
							]
						}
					},
					"response": []
				},
				{
					"name": "Reject > 20 MB",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response code is 413\", function () {\r",
									"    pm.response.to.have.status(413);\r",
									"});\r",
									"\r",
									"// pm.test(\"Response time is less than 5000ms\", function () {\r",
									"//     pm.expect(pm.response.responseTime).to.be.below(5000);\r",
									"// });\r",
									"\r",
									"pm.test(\"Response body has message field\", function () {\r",
									"    pm.response.to.have.jsonBody('message');\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							},
							{
								"key": "client_id",
								"value": "surya",
								"type": "text",
								"disabled": true
							},
							{
								"key": "client_secret",
								"value": "suryasecret",
								"type": "text",
								"disabled": true
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test-30mb.pdf"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"upload"
							]
						}
					},
					"response": []
				}
			],
			"description": "_Endpoint_ `/api/purchase-orders` berfungsi untuk melakukan fungsionalitas yang berkaitan dengan purchase order."
		},
		{
			"name": "Get Invoice Status",
			"item": [
				{
					"name": "get invoice status by id success",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"\r",
									"pm.test('Status code is 200', function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test('Content type is application/json', function () {\r",
									"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');\r",
									"});\r",
									"\r",
									"pm.test('Response body has id and status fields', function () {\r",
									"    pm.expect(response).to.have.property('id');\r",
									"    pm.expect(response).to.have.property('status');\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/invoices/status/{{invoice_id}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"status",
								"{{invoice_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get invoice status by id unathorized",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body has message field\", function () {\r",
									"    pm.expect(pm.response.json().message).to.exist;\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "wrong_id",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "wrong_secret",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"usernames\": [\"fonmagnus\"]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/status/{{invoice_id}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"status",
								"{{invoice_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get invoice invalid id",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Assert the status code\r",
									"pm.test(\"Status code is 404\", function () {\r",
									"    pm.response.to.have.status(404);\r",
									"});\r",
									"\r",
									"// Assert the response body\r",
									"pm.test(\"Response contains message: Invoice not found\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.message).to.equal(\"Invoice not found\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/invoices/status/invalid-invoice-id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"status",
								"invalid-invoice-id"
							]
						}
					},
					"response": []
				},
				{
					"name": "get invoice status by id forbidden",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 403\", function () {\r",
									"    pm.response.to.have.status(403);\r",
									"});\r",
									"\r",
									"// Test for content type\r",
									"pm.test(\"Content-Type is present and is application/json\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									"\r",
									"// Test for message in the response body\r",
									"pm.test(\"Response body contains a forbidden message\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.message).to.include(\"Forbidden\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/invoices/status/{{invoice_id_forbidden}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"status",
								"{{invoice_id_forbidden}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Get PO Status",
			"item": [
				{
					"name": "get po status by id success",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"\r",
									"pm.test('Status code is 200', function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test('Content type is application/json', function () {\r",
									"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');\r",
									"});\r",
									"\r",
									"pm.test('Response body has id and status fields', function () {\r",
									"    pm.expect(response).to.have.property('id');\r",
									"    pm.expect(response).to.have.property('status');\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/status/{{po_id}}/",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"status",
								"{{po_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "get po status by id unathorized",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body has message field\", function () {\r",
									"    pm.expect(pm.response.json().message).to.exist;\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "wrong_id",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "wrong_secret",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"usernames\": [\"fonmagnus\"]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/status/{{po_id}}/",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"status",
								"{{po_id}}",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "get po invalid id",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Assert the status code\r",
									"pm.test(\"Status code is 404\", function () {\r",
									"    pm.response.to.have.status(404);\r",
									"});\r",
									"\r",
									"// Assert the response body\r",
									"pm.test(\"Response contains message: Purchase order not found\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.message).to.equal(\"Purchase order not found\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/status/invalid-po-id/",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"status",
								"invalid-po-id",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "get po status by id forbidden",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 403\", function () {\r",
									"    pm.response.to.have.status(403);\r",
									"});\r",
									"\r",
									"// Test for content type\r",
									"pm.test(\"Content-Type is present and is application/json\", function () {\r",
									"    pm.response.to.have.header(\"Content-Type\");\r",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
									"});\r",
									"\r",
									"// Test for message in the response body\r",
									"pm.test(\"Response body contains a forbidden message\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.message).to.include(\"Forbidden\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/status/{{po_id_forbidden}}/",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"status",
								"{{po_id_forbidden}}",
								""
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Get Purchase Order",
			"item": [
				{
					"name": "get po by id analyzed",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Asserting the status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"// Asserting the presence of data.documents array in the response body\r",
									"pm.test(\"Response body has data.documents array\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.data.documents).to.be.an('array');\r",
									"    pm.expect(responseBody.data.documents).to.have.lengthOf.at.least(1);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/{{po_id}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"{{po_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get po by id processing",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"// Test for message in the response body\r",
									"pm.test(\"Message indicates purchase order is being processed\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.message).to.contains(\"process\");\r",
									"});\r",
									"\r",
									"// Test for empty array of documents\r",
									"pm.test(\"Documents array is empty\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.data.documents).to.be.an('array').that.is.empty;\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/{{po_id_processing}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"{{po_id_processing}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get po by id failed",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"// Test for message field in the response body\r",
									"pm.test(\"Message field exists in the response body\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.message).to.exist;\r",
									"    pm.expect(responseBody.message).to.be.a('string');\r",
									"});\r",
									"\r",
									"// Test for data field in the response body\r",
									"pm.test(\"Data field exists in the response body\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.data).to.exist;\r",
									"    pm.expect(responseBody.data).to.be.an('object');\r",
									"});\r",
									"\r",
									"// Test for documents field inside data field in the response body\r",
									"pm.test(\"Documents field exists inside data in the response body\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.data.documents).to.exist;\r",
									"    pm.expect(responseBody.data.documents).to.be.an('array');\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/{{po_id_failed}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"{{po_id_failed}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get po by id forbidden",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/{{po_id_forbidden}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"{{po_id_forbidden}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get po by invalid id",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"\r",
									"// Asserting the status code\r",
									"pm.test(\"Status code is 404\", function () {\r",
									"    pm.response.to.have.status(404);\r",
									"});\r",
									"\r",
									"// Asserting the message in the response body\r",
									"pm.test(\"Verify the message in the response body\", function () {\r",
									"    pm.expect(response.message).to.equal(\"Purchase order not found\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/invalid-id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"invalid-id"
							]
						}
					},
					"response": []
				},
				{
					"name": "get po by id unauthorized",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"\r",
									"pm.test(\"Response time is less than 1000ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(1000);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body has message field with value 'Unauthorized: Missing credentials'\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.message).to.equal(\"Unauthorized: Missing credentials\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/{{po_id}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"{{po_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Get Invoice",
			"item": [
				{
					"name": "get invoice by id analyzed",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Asserting the status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"// Asserting the presence of data.documents array in the response body\r",
									"pm.test(\"Response body has data.documents array\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.data.documents).to.be.an('array');\r",
									"    pm.expect(responseBody.data.documents).to.have.lengthOf.at.least(1);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/{{po_id}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"{{po_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get invoice by id processing",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"// Test for message in the response body\r",
									"pm.test(\"Message indicates purchase order is being processed\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.message).to.contains(\"process\");\r",
									"});\r",
									"\r",
									"// Test for empty array of documents\r",
									"pm.test(\"Documents array is empty\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.data.documents).to.be.an('array').that.is.empty;\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/{{po_id_processing}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"{{po_id_processing}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get invoice by id failed",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Test for status code\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"// Test for message field in the response body\r",
									"pm.test(\"Message field exists in the response body\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.message).to.exist;\r",
									"    pm.expect(responseBody.message).to.be.a('string');\r",
									"});\r",
									"\r",
									"// Test for data field in the response body\r",
									"pm.test(\"Data field exists in the response body\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.data).to.exist;\r",
									"    pm.expect(responseBody.data).to.be.an('object');\r",
									"});\r",
									"\r",
									"// Test for documents field inside data field in the response body\r",
									"pm.test(\"Documents field exists inside data in the response body\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.data.documents).to.exist;\r",
									"    pm.expect(responseBody.data.documents).to.be.an('array');\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/{{po_id_failed}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"{{po_id_failed}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get invoice by id forbidden",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/{{po_id_forbidden}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"{{po_id_forbidden}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get invoice by invalid id",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"\r",
									"// Asserting the status code\r",
									"pm.test(\"Status code is 404\", function () {\r",
									"    pm.response.to.have.status(404);\r",
									"});\r",
									"\r",
									"// Asserting the message in the response body\r",
									"pm.test(\"Verify the message in the response body\", function () {\r",
									"    pm.expect(response.message).to.equal(\"Purchase order not found\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/invalid-id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"invalid-id"
							]
						}
					},
					"response": []
				},
				{
					"name": "get invoice by id unauthorized",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {\r",
									"    pm.response.to.have.status(401);\r",
									"});\r",
									"\r",
									"pm.test(\"Response time is less than 1000ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(1000);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body has message field with value 'Unauthorized: Missing credentials'\", function () {\r",
									"    const responseBody = pm.response.json();\r",
									"    pm.expect(responseBody.message).to.equal(\"Unauthorized: Missing credentials\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/purchase-orders/{{po_id}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"purchase-orders",
								"{{po_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Delete Invoice",
			"item": [
				{
					"name": "Upload Invoice for Delete",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Content-Type is present and is application/json\", function () {",
									"    pm.response.to.have.header(\"Content-Type\");",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
									"});",
									"",
									"pm.test(\"Response contains message and invoice details\", function () {",
									"    const jsonData = pm.response.json();",
									"    pm.expect(jsonData.message.message).to.equal(\"Invoice upload initiated\");",
									"    pm.expect(jsonData.message.id).to.exist;",
									"});",
									"",
									"try {",
									"    const jsonData = pm.response.json();",
									"    const invoiceId = jsonData.message.id;",
									"",
									"    if (invoiceId) {",
									"        console.log(\"Menyimpan Invoice ID:\", invoiceId);",
									"        pm.environment.set(\"invoice_id_to_delete\", invoiceId);",
									"        pm.environment.set(\"statusRetryCount\", 0);",
									"",
									"        pm.test(\"Invoice ID stored successfully\", function() {",
									"            pm.expect(pm.environment.get(\"invoice_id_to_delete\")).to.equal(invoiceId);",
									"        });",
									"",
									"        console.log(\"Memulai pengecekan status...\");",
									"        postman.setNextRequest(\"Check Invoice Status\");",
									"",
									"    } else {",
									"        console.error(\"ID invoice tidak ditemukan dalam response!\");",
									"        pm.test(\"Failed to find Invoice ID in response\", function() {",
									"             throw new Error(\"Invoice ID not found in response message.id\");",
									"        });",
									"        postman.setNextRequest(null);",
									"    }",
									"} catch (e) {",
									"    console.error(\"Error parsing JSON or accessing ID:\", e);",
									"    pm.test(\"Failed to process response for storing Invoice ID\", function() {",
									"         throw e;",
									"     });",
									"     postman.setNextRequest(null);",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "test-valid.pdf"
								},
								{
									"key": "skipAnalysis",
									"value": "true",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/invoices/upload",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"upload"
							]
						},
						"description": "Upload invoice with skipAnalysis=true for deletion test."
					},
					"response": []
				},
				{
					"name": "Check Invoice Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const maxRetries = 10;",
									"const retryDelay = 5000;",
									"const targetStatus = \"Analyzed\";",
									"",
									"let currentRetry = parseInt(pm.environment.get(\"statusRetryCount\") || \"0\");",
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Content-Type is present and is application/json\", function () {",
									"    pm.response.to.have.header(\"Content-Type\");",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
									"});",
									"",
									"try {",
									"    const jsonData = pm.response.json();",
									"    const currentStatus = jsonData.status;",
									"    const invoiceId = pm.environment.get(\"invoice_id_to_delete\");",
									"",
									"    console.log(\">>> DEBUG: Nilai 'currentStatus' dari API:\", currentStatus);",
									"    console.log(\">>> DEBUG: Tipe data 'currentStatus':\", typeof currentStatus);",
									"    console.log(\">>> DEBUG: Nilai 'targetStatus' yang dicari:\", targetStatus);",
									"",
									"    console.log(`[Percobaan ${currentRetry + 1}/${maxRetries}] Status Invoice ${invoiceId}: ${currentStatus}`);",
									"",
									"    pm.test(\"Response contains ID and Status\", function() {",
									"        pm.expect(jsonData.id).to.exist;",
									"        pm.expect(jsonData.status).to.exist;",
									"        pm.expect(jsonData.id).to.equal(invoiceId);",
									"    });",
									"",
									"    if (currentStatus === targetStatus) {",
									"        console.log(`Status '${targetStatus}' tercapai untuk Invoice ${invoiceId}. Melanjutkan ke Delete.`);",
									"        pm.test(`Invoice status reached '${targetStatus}'`, function() {",
									"            pm.expect(currentStatus).to.equal(targetStatus);",
									"        });",
									"        pm.environment.unset(\"statusRetryCount\");",
									"        postman.setNextRequest(\"Delete Invoice Successful\");",
									"",
									"    } else if (currentRetry < maxRetries) {",
									"        console.log(`Status belum '${targetStatus}'. Mencoba lagi dalam ${retryDelay / 1000} detik...`);",
									"        pm.environment.set(\"statusRetryCount\", currentRetry + 1);",
									"        setTimeout(() => {",
									"             postman.setNextRequest(\"Check Invoice Status\");",
									"        }, retryDelay);",
									"",
									"    } else {",
									"        console.error(`Gagal mencapai status '${targetStatus}' setelah ${maxRetries} percobaan untuk Invoice ${invoiceId}.`);",
									"        pm.test(`TIMEOUT: Invoice status did not reach '${targetStatus}' within ${maxRetries} retries`, function() {",
									"            throw new Error(`Status was '${currentStatus}', expected '${targetStatus}'. Max retries exceeded.`);",
									"        });",
									"        pm.environment.unset(\"statusRetryCount\");",
									"        postman.setNextRequest(null);",
									"    }",
									"",
									"} catch (e) {",
									"    console.error(\"Error processing status response:\", e);",
									"    pm.test(\"Failed to process status response\", function() {",
									"        throw e;",
									"    });",
									"    pm.environment.unset(\"statusRetryCount\");",
									"    postman.setNextRequest(null);",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/invoices/status/{{invoice_id_to_delete}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"status",
								"{{invoice_id_to_delete}}"
							]
						},
						"description": "Polls the invoice status until it reaches 'Analyzed' or times out."
					},
					"response": []
				},
				{
					"name": "Delete Invoice Successful",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Content-Type is present and is application/json\", function () {",
									"    pm.response.to.have.header(\"Content-Type\");",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
									"});",
									"",
									"pm.test(\"Response contains success message\", function () {",
									"    pm.expect(pm.response.json().message).to.equal(\"Invoice successfully deleted\");",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/invoices/{{invoice_id_to_delete}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"{{invoice_id_to_delete}}"
							]
						},
						"description": "Delete invoice using the ID obtained from the upload after status is confirmed 'Analyzed'."
					},
					"response": []
				},
				{
					"name": "Delete Invoice Not Found",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test(\"Content-Type is present and is application/json\", function () {",
									"    pm.response.to.have.header(\"Content-Type\");",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
									"});",
									"",
									"pm.test(\"Response contains not found message\", function () {",
									"    pm.expect(pm.response.json().message).to.equal(\"Invoice not found\");",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "client_id",
								"value": "{{client_id}}",
								"type": "text"
							},
							{
								"key": "client_secret",
								"value": "{{client_secret}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/invoices/{{invoice_id_to_delete}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"invoices",
								"{{invoice_id_to_delete}}"
							]
						},
						"description": "Attempt to delete an invoice that should no longer exist (e.g., after successful deletion)."
					},
					"response": []
				}
			],
			"description": "Tests for deleting invoices, including polling for 'Analyzed' status before deletion."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}