{"event":"UPLOAD_START","filename":"invoice_3204277241.pdf","invoiceId":"96fa97e0-7686-45f0-9d32-cbb43a44c0e2","level":"info","message":"Invoice upload initiated","partnerId":"6ad02ce3-a83d-4caa-a9b0-a969ce582162","service":"invoice-service","timestamp":"2025-04-09T15:17:38.616Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"96fa97e0-7686-45f0-9d32-cbb43a44c0e2","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.ap-southeast-3.amazonaws.com/sandbox.intern.fineksi.com/0bf7f2c2-589b-4e5f-b389-b151bc6db43e.pdf","service":"invoice-service","timestamp":"2025-04-09T15:17:38.821Z"}
{"event":"PROCESSING_START","invoiceId":"96fa97e0-7686-45f0-9d32-cbb43a44c0e2","level":"info","message":"Starting invoice processing","service":"invoice-service","timestamp":"2025-04-09T15:17:38.866Z"}
{"event":"ANALYSIS_COMPLETE","invoiceId":"96fa97e0-7686-45f0-9d32-cbb43a44c0e2","jsonUrl":"https://s3.ap-southeast-3.amazonaws.com/sandbox.intern.fineksi.com/analysis/96fa97e0-7686-45f0-9d32-cbb43a44c0e2-analysis-28806087-e2ed-477d-86da-6c38a210ff37.json","level":"info","message":"Invoice analysis completed","service":"invoice-service","timestamp":"2025-04-09T15:17:47.714Z"}
{"dataSummary":{"hasCustomerData":true,"hasVendorData":true,"itemsCount":5},"event":"MAPPING_COMPLETE","invoiceId":"96fa97e0-7686-45f0-9d32-cbb43a44c0e2","level":"info","message":"Invoice data mapping completed","service":"invoice-service","timestamp":"2025-04-09T15:17:47.716Z"}
{"event":"PROCESSING_COMPLETE","invoiceId":"96fa97e0-7686-45f0-9d32-cbb43a44c0e2","level":"info","message":"Invoice processing completed successfully","service":"invoice-service","timestamp":"2025-04-09T15:17:47.812Z"}
{"event":"UPLOAD_START","filename":"invoice_3204277241.pdf","invoiceId":"ac599dec-e2cc-4b28-b460-85f0af341e9b","level":"info","message":"Invoice upload initiated","partnerId":"6ad02ce3-a83d-4caa-a9b0-a969ce582162","service":"invoice-service","timestamp":"2025-04-09T15:20:17.762Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"ac599dec-e2cc-4b28-b460-85f0af341e9b","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.ap-southeast-3.amazonaws.com/sandbox.intern.fineksi.com/dd3ab028-8204-4662-bc66-a184f888922f.pdf","service":"invoice-service","timestamp":"2025-04-09T15:20:17.911Z"}
{"event":"PROCESSING_START","invoiceId":"ac599dec-e2cc-4b28-b460-85f0af341e9b","level":"info","message":"Starting invoice processing","service":"invoice-service","timestamp":"2025-04-09T15:20:17.953Z"}
{"event":"ANALYSIS_COMPLETE","invoiceId":"ac599dec-e2cc-4b28-b460-85f0af341e9b","jsonUrl":"https://s3.ap-southeast-3.amazonaws.com/sandbox.intern.fineksi.com/analysis/ac599dec-e2cc-4b28-b460-85f0af341e9b-analysis-eac24ac6-d27c-4756-a17e-eea19b4ea6e9.json","level":"info","message":"Invoice analysis completed","service":"invoice-service","timestamp":"2025-04-09T15:20:26.812Z"}
{"dataSummary":{"hasCustomerData":true,"hasVendorData":true,"itemsCount":5},"event":"MAPPING_COMPLETE","invoiceId":"ac599dec-e2cc-4b28-b460-85f0af341e9b","level":"info","message":"Invoice data mapping completed","service":"invoice-service","timestamp":"2025-04-09T15:20:26.815Z"}
{"event":"PROCESSING_COMPLETE","invoiceId":"ac599dec-e2cc-4b28-b460-85f0af341e9b","level":"info","message":"Invoice processing completed successfully","service":"invoice-service","timestamp":"2025-04-09T15:20:26.887Z"}
{"event":"PROCESSING_START","invoiceId":"test-invoice-123","level":"info","message":"Starting invoice processing","service":"invoice-service","timestamp":"2025-04-09T15:48:44.195Z"}
{"event":"ANALYSIS_COMPLETE","invoiceId":"test-invoice-123","jsonUrl":"https://example.com/analysis.json","level":"info","message":"Invoice analysis completed","service":"invoice-service","timestamp":"2025-04-09T15:48:44.208Z"}
{"dataSummary":{"hasCustomerData":true,"hasVendorData":true,"itemsCount":1},"event":"MAPPING_COMPLETE","invoiceId":"test-invoice-123","level":"info","message":"Invoice data mapping completed","service":"invoice-service","timestamp":"2025-04-09T15:48:44.209Z"}
{"event":"PROCESSING_COMPLETE","invoiceId":"test-invoice-123","level":"info","message":"Invoice processing completed successfully","service":"invoice-service","timestamp":"2025-04-09T15:48:44.209Z"}
{"event":"PROCESSING_START","invoiceId":"error-invoice-123","level":"info","message":"Starting invoice processing","service":"invoice-service","timestamp":"2025-04-09T15:48:44.213Z"}
{"error":"Analysis error","event":"PROCESSING_ERROR","invoiceId":"error-invoice-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Analysis error\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/processInvoiceAsync.test.js:102:19)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"PROCESSING","timestamp":"2025-04-09T15:48:44.223Z"}
{"event":"PROCESSING_START","invoiceId":"error-invoice-123","level":"info","message":"Starting invoice processing","service":"invoice-service","timestamp":"2025-04-09T15:48:44.228Z"}
{"event":"ANALYSIS_COMPLETE","invoiceId":"error-invoice-123","jsonUrl":"https://example.com/analysis.json","level":"info","message":"Invoice analysis completed","service":"invoice-service","timestamp":"2025-04-09T15:48:44.229Z"}
{"error":"Mapping error","event":"PROCESSING_ERROR","invoiceId":"error-invoice-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Mapping error\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/processInvoiceAsync.test.js:126:19)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"PROCESSING","timestamp":"2025-04-09T15:48:44.230Z"}
{"event":"PROCESSING_START","invoiceId":"error-invoice-123","level":"info","message":"Starting invoice processing","service":"invoice-service","timestamp":"2025-04-09T15:48:44.231Z"}
{"event":"ANALYSIS_COMPLETE","invoiceId":"error-invoice-123","jsonUrl":"https://example.com/analysis.json","level":"info","message":"Invoice analysis completed","service":"invoice-service","timestamp":"2025-04-09T15:48:44.231Z"}
{"dataSummary":{"hasCustomerData":true,"hasVendorData":true,"itemsCount":1},"event":"MAPPING_COMPLETE","invoiceId":"error-invoice-123","level":"info","message":"Invoice data mapping completed","service":"invoice-service","timestamp":"2025-04-09T15:48:44.231Z"}
{"error":"Update error","event":"PROCESSING_ERROR","invoiceId":"error-invoice-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Update error\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/processInvoiceAsync.test.js:151:19)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"PROCESSING","timestamp":"2025-04-09T15:48:44.232Z"}
{"event":"PROCESSING_START","invoiceId":"error-invoice-123","level":"info","message":"Starting invoice processing","service":"invoice-service","timestamp":"2025-04-09T15:48:44.246Z"}
{"event":"ANALYSIS_COMPLETE","invoiceId":"error-invoice-123","jsonUrl":"https://example.com/analysis.json","level":"info","message":"Invoice analysis completed","service":"invoice-service","timestamp":"2025-04-09T15:48:44.247Z"}
{"dataSummary":{"hasCustomerData":true,"hasVendorData":true,"itemsCount":1},"event":"MAPPING_COMPLETE","invoiceId":"error-invoice-123","level":"info","message":"Invoice data mapping completed","service":"invoice-service","timestamp":"2025-04-09T15:48:44.247Z"}
{"error":"Customer/Vendor error","event":"PROCESSING_ERROR","invoiceId":"error-invoice-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Customer/Vendor error\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/processInvoiceAsync.test.js:175:19)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"PROCESSING","timestamp":"2025-04-09T15:48:44.247Z"}
{"event":"PROCESSING_START","invoiceId":"error-invoice-123","level":"info","message":"Starting invoice processing","service":"invoice-service","timestamp":"2025-04-09T15:48:44.248Z"}
{"event":"ANALYSIS_COMPLETE","invoiceId":"error-invoice-123","jsonUrl":"https://example.com/analysis.json","level":"info","message":"Invoice analysis completed","service":"invoice-service","timestamp":"2025-04-09T15:48:44.248Z"}
{"dataSummary":{"hasCustomerData":true,"hasVendorData":true,"itemsCount":1},"event":"MAPPING_COMPLETE","invoiceId":"error-invoice-123","level":"info","message":"Invoice data mapping completed","service":"invoice-service","timestamp":"2025-04-09T15:48:44.249Z"}
{"error":"Items error","event":"PROCESSING_ERROR","invoiceId":"error-invoice-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Items error\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/processInvoiceAsync.test.js:200:19)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"PROCESSING","timestamp":"2025-04-09T15:48:44.249Z"}
{"event":"PROCESSING_START","invoiceId":"error-invoice-123","level":"info","message":"Starting invoice processing","service":"invoice-service","timestamp":"2025-04-09T15:48:44.250Z"}
{"event":"ANALYSIS_COMPLETE","invoiceId":"error-invoice-123","jsonUrl":"https://example.com/analysis.json","level":"info","message":"Invoice analysis completed","service":"invoice-service","timestamp":"2025-04-09T15:48:44.250Z"}
{"dataSummary":{"hasCustomerData":true,"hasVendorData":true,"itemsCount":1},"event":"MAPPING_COMPLETE","invoiceId":"error-invoice-123","level":"info","message":"Invoice data mapping completed","service":"invoice-service","timestamp":"2025-04-09T15:48:44.250Z"}
{"error":"Status update error","event":"PROCESSING_ERROR","invoiceId":"error-invoice-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Status update error\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/processInvoiceAsync.test.js:225:19)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"PROCESSING","timestamp":"2025-04-09T15:48:44.250Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-09T15:48:46.331Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-09T15:48:46.336Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-09T15:48:46.270Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-09T15:48:46.290Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-09T15:48:46.292Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-09T15:48:46.320Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-09T15:48:46.328Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-09T15:48:46.348Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-09T15:48:46.380Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-09T15:48:46.383Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-09T15:48:46.393Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-09T15:48:46.416Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-09T15:48:46.419Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-09T15:48:46.420Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-09T15:48:46.422Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:28:52.641Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:28:52.648Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:28:52.655Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:28:52.663Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:28:52.671Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:28:52.679Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:28:52.680Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:28:52.688Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:28:52.689Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:28:52.691Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:28:52.693Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:28:52.694Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:28:52.695Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-10T09:28:55.222Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-10T09:28:55.225Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:32:23.483Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:32:23.493Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:32:23.494Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:32:23.502Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:32:23.507Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:32:23.508Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:32:23.509Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:32:23.510Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:32:23.512Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:32:23.513Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:32:23.513Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:32:23.522Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:32:23.523Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-10T09:32:24.671Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-10T09:32:24.681Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-10T09:33:47.917Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-10T09:33:47.923Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:33:48.431Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:33:48.435Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:33:48.436Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:33:48.447Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:33:48.464Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:33:48.467Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:33:48.468Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:33:48.469Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:33:48.470Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:33:48.472Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:33:48.474Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:33:48.479Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:33:48.485Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-10T09:35:24.738Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-10T09:35:24.747Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:35:25.204Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:35:25.210Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:35:25.211Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:35:25.218Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:35:25.253Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:35:25.255Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:35:25.256Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:35:25.256Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:35:25.257Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:35:25.259Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:35:25.260Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:35:25.261Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:35:25.261Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:39:10.268Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:39:10.285Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:39:10.287Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:39:10.292Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:39:10.297Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:39:10.301Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:39:10.304Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:39:10.305Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:39:10.306Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:39:10.308Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:39:10.310Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:39:10.310Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:39:10.311Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-10T09:39:10.520Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-10T09:39:10.523Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-10T09:39:17.663Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-10T09:39:17.673Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:39:18.207Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:39:18.211Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:39:18.212Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:39:18.219Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:39:18.234Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:39:18.237Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:39:18.242Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:39:18.243Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:39:18.244Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:39:18.247Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:39:18.248Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:39:18.248Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:39:18.249Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-10T09:40:36.151Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-10T09:40:36.157Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:40:36.446Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:40:36.450Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:40:36.451Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:40:36.456Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:40:36.462Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:40:36.465Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:40:36.468Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:40:36.469Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:40:36.470Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:40:36.471Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:40:36.472Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:40:36.473Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:40:36.473Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-10T09:42:29.369Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-10T09:42:29.409Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:42:29.837Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:42:29.852Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:42:29.854Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:42:29.865Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:42:29.871Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:42:29.872Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:42:29.874Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:42:29.874Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:42:29.875Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:42:29.876Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:42:29.876Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:42:29.877Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:42:29.877Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-10T09:42:55.390Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-10T09:42:55.393Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:42:55.547Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:42:55.557Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:42:55.558Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:42:55.563Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:42:55.566Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:42:55.567Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:42:55.669Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:42:55.675Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:42:55.676Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:42:55.680Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:42:55.682Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:42:55.684Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:42:55.685Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:43:11.116Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:43:11.125Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:43:11.126Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:43:11.143Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:43:11.149Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:43:11.150Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:43:11.151Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:43:11.152Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:43:11.152Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:43:11.154Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:43:11.155Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:43:11.155Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:43:11.156Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-10T09:43:11.451Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-10T09:43:11.456Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-10T09:43:30.464Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-10T09:43:30.467Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:43:31.178Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:43:31.192Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:43:31.197Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:192:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:43:31.216Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:194:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:43:31.224Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:205:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:208:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:43:31.230Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:43:31.232Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-10T09:43:31.233Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:212:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:43:31.233Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:247:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:29:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:250:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:43:31.237Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-10T09:43:31.238Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:260:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:37:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-10T09:43:31.239Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:41:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:263:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-10T09:43:31.241Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-18T04:19:25.772Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-18T04:19:25.780Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-18T04:19:25.811Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:193:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-18T04:19:25.831Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:195:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-18T04:19:25.839Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:206:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:209:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-18T04:19:25.843Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-18T04:19:25.845Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-18T04:19:25.846Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:213:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-18T04:19:25.847Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:248:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:251:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-18T04:19:25.847Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-18T04:19:25.848Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:261:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:38:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-18T04:19:25.849Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-18T04:19:25.851Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-18T04:19:27.794Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-18T04:19:27.801Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-18T04:21:26.186Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-18T04:21:26.197Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-18T04:21:26.200Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:193:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-18T04:21:26.214Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:195:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-18T04:21:26.219Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:206:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:209:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-18T04:21:26.222Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-18T04:21:26.223Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-18T04:21:26.224Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:213:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-18T04:21:26.226Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:248:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:251:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-18T04:21:26.228Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-18T04:21:26.231Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:261:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:38:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-18T04:21:26.232Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-18T04:21:26.233Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-18T04:21:26.872Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-18T04:21:26.875Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-19T11:06:20.610Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-19T11:06:20.613Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:06:20.886Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-19T11:06:20.891Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:06:20.893Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:193:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-19T11:06:20.903Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:195:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:06:20.907Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:206:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:209:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:06:20.910Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:06:20.911Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-19T11:06:20.912Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:213:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:06:20.914Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:248:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:251:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:06:20.915Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:06:20.920Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:261:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:38:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-19T11:06:20.921Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:06:20.923Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-19T11:07:51.360Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-19T11:07:51.364Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:07:51.897Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-19T11:07:51.904Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:07:51.905Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:193:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-19T11:07:51.911Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:195:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:07:51.928Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:206:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:209:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:07:51.941Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:07:51.944Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-19T11:07:51.945Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:213:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:07:51.948Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:248:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:251:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:07:51.949Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:07:51.962Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:261:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:38:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-19T11:07:51.964Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:07:51.965Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-19T11:10:51.318Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-19T11:10:51.323Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:10:51.332Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-19T11:10:51.337Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:10:51.338Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:193:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-19T11:10:51.348Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:195:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:10:51.352Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:206:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:209:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:10:51.353Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:10:51.355Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-19T11:10:51.356Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:213:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:10:51.357Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:248:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:251:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:10:51.359Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:10:51.361Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:261:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:38:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-19T11:10:51.489Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:10:51.491Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:15:04.024Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-19T11:15:04.029Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:15:04.030Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:193:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-19T11:15:04.041Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:195:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:15:04.047Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:206:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:209:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:15:04.048Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:15:04.049Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-19T11:15:04.050Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:213:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:15:04.050Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:248:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:251:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:15:04.058Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:15:04.061Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:261:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:38:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-19T11:15:04.062Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:15:04.065Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-19T11:15:04.121Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-19T11:15:04.127Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-19T11:19:45.932Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-19T11:19:45.936Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:19:46.073Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-19T11:19:46.079Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:19:46.080Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:193:49)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-19T11:19:46.089Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:195:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:19:46.092Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:206:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:209:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:19:46.093Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:19:46.094Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-19T11:19:46.095Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:213:70)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:19:46.096Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:248:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceValidator.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:30:22)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:251:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:19:46.096Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-19T11:19:46.098Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:261:13)\n    at /Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:397:39\n    at InvoiceService.<anonymous> (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-mock/build/index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:38:31)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-19T11:19:46.098Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/src/services/invoice/invoiceService.js:42:15)\n    at Object.uploadInvoice (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/tests/services/invoice/uploadInvoice.test.js:264:33)\n    at Promise.then.completed (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/suryaputra/Downloads/fin-invoice-ocr-team6/backend/node_modules/jest-runner/build/testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-19T11:19:46.101Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-25T14:22:48.502Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-25T14:22:48.525Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-25T14:22:48.529Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:193:49)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-25T14:22:48.586Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\src\\services\\invoice\\invoiceService.js:43:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:195:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-25T14:22:48.600Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:206:13)\n    at C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:397:39\n    at InvoiceValidator.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\src\\services\\invoice\\invoiceService.js:31:22)\n    at Object.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:209:33)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-25T14:22:48.604Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-25T14:22:48.610Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-25T14:22:48.616Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:213:70)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-25T14:22:48.619Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:248:13)\n    at C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:397:39\n    at InvoiceValidator.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\src\\services\\invoice\\invoiceService.js:31:22)\n    at Object.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:251:33)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-25T14:22:48.626Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-25T14:22:48.637Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:261:13)\n    at C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:397:39\n    at InvoiceService.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\src\\services\\invoice\\invoiceService.js:39:31)\n    at Object.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:264:33)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-25T14:22:48.652Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\src\\services\\invoice\\invoiceService.js:43:15)\n    at Object.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:264:33)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-25T14:22:48.657Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-25T14:22:49.824Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-25T14:22:49.842Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-25T14:23:54.984Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-25T14:23:55.036Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-25T14:23:55.041Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at Object.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:193:49)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-25T14:23:55.059Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\src\\services\\invoice\\invoiceService.js:43:15)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at Object.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:195:5)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-25T14:23:55.071Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:206:13)\n    at C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:397:39\n    at InvoiceValidator.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\src\\services\\invoice\\invoiceService.js:31:22)\n    at Object.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:209:33)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-25T14:23:55.083Z"}
{"event":"UPLOAD_START","filename":"test-invoice.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-25T14:23:55.088Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://s3.amazonaws.com/test-bucket/test-file.pdf","service":"invoice-service","timestamp":"2025-04-25T14:23:55.090Z"}
{"error":"Failed to save invoice to database","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to save invoice to database\n    at Object.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:213:70)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-25T14:23:55.092Z"}
{"error":"Partner ID is required","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Partner ID is required\n    at InvoiceValidator.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:248:13)\n    at C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:397:39\n    at InvoiceValidator.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at InvoiceValidator.mockConstructor [as validateFileData] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at InvoiceService.validateFileData [as uploadInvoice] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\src\\services\\invoice\\invoiceService.js:31:22)\n    at Object.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:251:33)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-25T14:23:55.098Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"123","service":"invoice-service","timestamp":"2025-04-25T14:23:55.102Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":"mocked-uuid-123","level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:261:13)\n    at C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:397:39\n    at InvoiceService.<anonymous> (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:404:13)\n    at InvoiceService.mockConstructor [as uploadFile] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-mock\\build\\index.js:148:19)\n    at InvoiceService.uploadFile [as uploadInvoice] (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\src\\services\\invoice\\invoiceService.js:39:31)\n    at Object.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:264:33)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"S3_UPLOAD","timestamp":"2025-04-25T14:23:55.105Z"}
{"error":"Failed to upload file to S3","event":"PROCESSING_ERROR","invoiceId":null,"level":"error","message":"Error during invoice processing","service":"invoice-service","stack":"Error: Failed to upload file to S3\n    at InvoiceService.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\src\\services\\invoice\\invoiceService.js:43:15)\n    at Object.uploadInvoice (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\tests\\services\\invoice\\uploadInvoice.test.js:264:33)\n    at Promise.then.completed (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\mif05\\OneDrive\\Documents\\Kuliah\\Semester_6\\PPL\\tmp\\fin-invoice-ocr-team6\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)","stage":"UPLOAD_INITIATION","timestamp":"2025-04-25T14:23:55.106Z"}
{"event":"UPLOAD_START","filename":"test.pdf","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice upload initiated","partnerId":"partner-123","service":"invoice-service","timestamp":"2025-04-25T14:23:55.945Z"}
{"event":"UPLOAD_SUCCESS","invoiceId":"mocked-uuid-123","level":"info","message":"Invoice uploaded to S3","s3Url":"https://example.com/test.pdf","service":"invoice-service","timestamp":"2025-04-25T14:23:55.965Z"}
